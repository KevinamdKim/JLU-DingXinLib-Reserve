# JLU-DingXinLib-Reserve

本项目是一个用于吉林大学鼎新图书馆座位预约的命令行脚本，可用于自动化预约流程。

## 📦 功能特色

- 支持命令行或交互式两种模式
- 自动获取公钥并使用 RSA 加密密码
- 提供默认预约时间（次日 10:00–22:00）
- 自动识别座位编码与设备 ID 映射

## 🚀 快速开始

### 安装依赖项

```bash
pip install pycryptodome requests
```

### 方式一：命令行参数运行

```bash
python libbook.py \
  --logon_name your_username \
  --raw_password your_password \
  --seats 2B254 \
  --resvBeginTime "2025-05-20 10:00:00" \
  --resvEndTime "2025-05-20 22:00:00"
```

### 方式二：交互式模式（推荐）

```bash
python libbook.py
```

将按提示输入用户名、密码、座位编号及预约时间等信息。

------

## 🧾 参数说明

| 参数              | 类型  | 说明                                     | 默认值            |
| ----------------- | ----- | ---------------------------------------- | ----------------- |
| `--logon_name`    | str   | 登录账号（通常为学号或用户名）           | `"your_username"` |
| `--raw_password`  | str   | 明文密码（通常为身份证后六位）           | `"your_password"` |
| `--seats`         | str[] | 座位编号，如 `2B254 3A100`               | `["2B254"]`       |
| `--resvBeginTime` | str   | 预约开始时间，格式 `YYYY-MM-DD HH:MM:SS` | 次日 10:00        |
| `--resvEndTime`   | str   | 预约结束时间，格式 `YYYY-MM-DD HH:MM:SS` | 次日 22:00        |

------

## 🪑 座位编号与房间编码说明（示例）

脚本内置设备 ID 映射逻辑，支持以下房间区域（示例）：

```
2B: 2B001–2B354  # 二楼-开放式学习空间B
3A: 3A001–3A124  # 三楼-图书学习空间A
3B: 3B001–3B188  # 三楼-图书学习空间B
4A: 4A001–4A172  # 四楼-期刊学习空间A
4B: 4B001–4B244  # 四楼-期刊学习空间B
5A: 5A001–5A131  # 五楼-交互式学习空间A
5B: 5B001–5B184  # 五楼-交互式学习空间B
```

📌 你可以通过命令 `--seats` 指定任意有效座位码，系统会自动匹配设备 ID。

------

## 🔐 安全与隐私说明

- 登录密码通过图书馆接口提供的 **RSA 公钥加密**，保障数据安全传输
- 请替换用户名密码为你自己的真实信息

------

## 📅 自动化建议

你可以将本脚本集成到系统计划任务中，实现每日自动预约：

### 示例（Linux Crontab）

```bash
0 8 * * * /usr/bin/python3 /path/to/libbook.py >> /path/to/log.txt 2>&1
```

表示每天早上 8 点执行一次脚本，并将日志输出到 `log.txt`。

------

## 📷 示例输出

```text
用户名: your_username
密码: ******
预约时间: 2025-05-20 10:00:00 至 2025-05-20 22:00:00
预约座位：
  - 2B254（二楼-开放式学习空间B）
正在获取公钥...
正在登录...
登录结果：登录成功
✅ 登录成功
正在提交预约请求...
预约结果：预约成功
✅ 预约成功！
```

------

## ❗ 注意事项

- 本脚本适用于吉林大学鼎新图书馆预约系统
- 若你所在学校接口与此不同，请参考源码自行适配
- 脚本中 `seat_mapping` 为硬编码，如学校更新编号，请手动抓包更新相关区间
- 脚本支持 UTF-8 编码的中文输出，确保你的终端支持中文

------

## 📁 项目结构

```text
├── libbook.py       # 主程序
├── README.md        # 项目说明文档
└── requirements.txt # 可选：依赖清单
```

------

## 📄 License

本项目采用 [MIT License](https://opensource.org/licenses/MIT) 开源许可协议。欢迎使用和修改，但请保留原作者信息。

------

## ✉️ 联系建议

如有问题或改进建议，欢迎提交 [Issue](https://github.com/yourname/libseat-reservation/issues) 或 Pull Request。